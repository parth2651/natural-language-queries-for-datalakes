# Metadata Generator

This Python script generates metadata from a DDL (Data Definition Language) file and a database name. The metadata can be used later to map verbal descriptions and natural language questions to the tables in the DDL.

## Prerequisites

Before running the script, make sure you have the following prerequisites installed:

- Python 3.x
- boto3 (AWS SDK for Python)

## Usage

Create a ddl file from your db dump, keeping it at a reasonable size,
as this script will use an LLM to generate the metadata.
You can for instance remove the INSERT clauses, keeping only the CREATE TABLE ones.

To run the script, use the following command:

```
python3 generate_metadata.py --db_name "Chinook.db" --ddl_file "./data-sources/chinook/ddl.txt" --channel "sqlite"
```

Replace the following arguments with your desired values:

- `--db_name`: The name of the database for which you want to generate metadata.
- `--ddl_file`: The path to the DDL file containing the table definitions.
- `--channel` (optional): The channel or database type (e.g., "sqlite", "athena", "postgresql"). The default value is "sqlite".

## Output

The script generates one or more text files in the "output" directory, each containing the metadata for a specific table in the database. The metadata includes a description of the table, its columns (excluding housekeeping columns like IDs and timestamps), and relationships with other tables.

## Example of the metadata created

Here's an example of the metadata format for an "address" table in a "WebShop" database:

```
<METADATA CHANNEL="sqlite" DATABASE="WebShop" TABLE="address">
- Description: Addresses for receipts and shipping.
- Data:
-- firstname: Legal first name of the person living at this address
-- lastname: Legal last name of the person living at this address
-- address1: House number, street, apartment
-- address2: Street, floor, room, office number
-- city: City and state name
-- zip: US Zip Code or world postal code
- Relationships:
-- (address.customerid â†’ customer.id) - Table containing information about the customers who purchase products
</METADATA>
```

Note: The actual metadata generated by the script will depend on the provided DDL and database name.